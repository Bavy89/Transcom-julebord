const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzKdOcSsYLRR4jEO3bPaZnykqlVsD5K9McyANOm7FFki67tcXSHW5x51vKd7AmQpQyeYA/exec";

const rsvpForm = document.getElementById('rsvpFormElement');

rsvpForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value
    };
    
    try {
        const response = await fetch(GOOGLE_SCRIPT_URL, {
            method: 'POST',
            body: JSON.stringify(formData),
            headers: { 'Content-Type': 'application/json' }
        });

        const text = await response.text();

        if (response.ok && text.includes("Success")) {
            alert("Takk for din p√•melding!");
            rsvpForm.reset();
        } else {
            alert("Noe gikk galt: " + text);
            console.error("Server svarte med feil:", response.status, text);
        }
    } catch (err) {
        alert("Feil ved sending av skjema: " + err.message);
        console.error("Feil ved sending av skjema:", err);
    }
});